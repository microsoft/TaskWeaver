<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Blog | TaskWeaver</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docusaurus.io/TaskWeaver/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docusaurus.io/TaskWeaver/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docusaurus.io/TaskWeaver/blog"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Blog | TaskWeaver"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/TaskWeaver/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docusaurus.io/TaskWeaver/blog"><link data-rh="true" rel="alternate" href="https://docusaurus.io/TaskWeaver/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://docusaurus.io/TaskWeaver/blog" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"Blog","@id":"https://docusaurus.io/TaskWeaver/blog","mainEntityOfPage":"https://docusaurus.io/TaskWeaver/blog","headline":"Blog","description":"Blog","blogPost":[{"@type":"BlogPosting","@id":"https://docusaurus.io/TaskWeaver/blog/vision","mainEntityOfPage":"https://docusaurus.io/TaskWeaver/blog/vision","url":"https://docusaurus.io/TaskWeaver/blog/vision","headline":"Vision input for the Planner","name":"Vision input for the Planner","description":"Introduction","datePublished":"2025-03-13T00:00:00.000Z","author":{"@type":"Person","name":"Liqun Li","description":"Principal Researcher","url":"https://liqul.github.io","image":"https://liqul.github.io/assets/logo_small_bw.png"},"keywords":[]},{"@type":"BlogPosting","@id":"https://docusaurus.io/TaskWeaver/blog/reasoning","mainEntityOfPage":"https://docusaurus.io/TaskWeaver/blog/reasoning","url":"https://docusaurus.io/TaskWeaver/blog/reasoning","headline":"What makes a good agent reasoning framework?","name":"What makes a good agent reasoning framework?","description":"An agent can listen to the user's request, understand the context, make plans, take actions, observe the results, and respond to the user. Its behavior is driven by the reasoning process, which is the core of the agent's intelligence.","datePublished":"2025-01-20T00:00:00.000Z","author":{"@type":"Person","name":"Liqun Li","description":"Principal Researcher","url":"https://liqul.github.io","image":"https://liqul.github.io/assets/logo_small_bw.png"},"keywords":[]},{"@type":"BlogPosting","@id":"https://docusaurus.io/TaskWeaver/blog/experience","mainEntityOfPage":"https://docusaurus.io/TaskWeaver/blog/experience","url":"https://docusaurus.io/TaskWeaver/blog/experience","headline":"Experience Selection in TaskWeaver","name":"Experience Selection in TaskWeaver","description":"We have introduced the motivation of the experience module in Experience","datePublished":"2024-09-14T00:00:00.000Z","author":{"@type":"Person","name":"Liqun Li","description":"Principal Researcher","url":"https://liqul.github.io","image":"https://liqul.github.io/assets/logo_small_bw.png"},"keywords":[]},{"@type":"BlogPosting","@id":"https://docusaurus.io/TaskWeaver/blog/local_llm","mainEntityOfPage":"https://docusaurus.io/TaskWeaver/blog/local_llm","url":"https://docusaurus.io/TaskWeaver/blog/local_llm","headline":"Run TaskWeaver with Locally Deployed Not-that-Large Language Models","name":"Run TaskWeaver with Locally Deployed Not-that-Large Language Models","description":"The feature introduced in this blog post can cause incompatibility issue with the previous version of TaskWeaver","datePublished":"2024-07-08T00:00:00.000Z","author":{"@type":"Person","name":"Liqun Li","description":"Principal Researcher","url":"https://liqul.github.io","image":"https://liqul.github.io/assets/logo_small_bw.png"},"keywords":[]},{"@type":"BlogPosting","@id":"https://docusaurus.io/TaskWeaver/blog/plugin","mainEntityOfPage":"https://docusaurus.io/TaskWeaver/blog/plugin","url":"https://docusaurus.io/TaskWeaver/blog/plugin","headline":"Plugins In-Depth","name":"Plugins In-Depth","description":"**Pre-requisites**: Please refer to the Introduction and the Plugin Development","datePublished":"2024-05-23T00:00:00.000Z","author":{"@type":"Person","name":"Liqun Li","description":"Principal Researcher","url":"https://liqul.github.io","image":"https://liqul.github.io/assets/logo_small_bw.png"},"keywords":[]},{"@type":"BlogPosting","@id":"https://docusaurus.io/TaskWeaver/blog/evaluation","mainEntityOfPage":"https://docusaurus.io/TaskWeaver/blog/evaluation","url":"https://docusaurus.io/TaskWeaver/blog/evaluation","headline":"How to evaluate a LLM agent?","name":"How to evaluate a LLM agent?","description":"The challenges","datePublished":"2024-05-07T00:00:00.000Z","author":[{"@type":"Person","name":"Liqun Li","description":"Principal Researcher","url":"https://liqul.github.io","image":"https://liqul.github.io/assets/logo_small_bw.png"},{"@type":"Person","name":"Xu Zhang","description":"Senior Researcher","url":"https://scholar.google.com/citations?user=bqXdMMMAAAAJ&hl=zh-CN","image":"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=bqXdMMMAAAAJ&citpid=3"}],"keywords":[]},{"@type":"BlogPosting","@id":"https://docusaurus.io/TaskWeaver/blog/role","mainEntityOfPage":"https://docusaurus.io/TaskWeaver/blog/role","url":"https://docusaurus.io/TaskWeaver/blog/role","headline":"Roles in TaskWeaver","name":"Roles in TaskWeaver","description":"We frame TaskWeaver as a code-first agent framework. The term \"code-first\" means that the agent is designed to","datePublished":"2024-05-07T00:00:00.000Z","author":[{"@type":"Person","name":"Liqun Li","description":"Principal Researcher","url":"https://liqul.github.io","image":"https://liqul.github.io/assets/logo_small_bw.png"},{"@type":"Person","name":"Xu Zhang","description":"Senior Researcher","url":"https://scholar.google.com/citations?user=bqXdMMMAAAAJ&hl=zh-CN","image":"https://scholar.googleusercontent.com/citations?view_op=view_photo&user=bqXdMMMAAAAJ&citpid=3"}],"keywords":[]}]}</script><link rel="alternate" type="application/rss+xml" href="/TaskWeaver/blog/rss.xml" title="TaskWeaver RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/TaskWeaver/blog/atom.xml" title="TaskWeaver Atom Feed"><link rel="stylesheet" href="/TaskWeaver/assets/css/styles.4f14592f.css">
<script src="/TaskWeaver/assets/js/runtime~main.6cfe51d5.js" defer="defer"></script>
<script src="/TaskWeaver/assets/js/main.1651dd3d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/TaskWeaver/"><div class="navbar__logo"><img src="/TaskWeaver/img/logo.svg" alt="TaskWeaver Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/TaskWeaver/img/logo.svg" alt="TaskWeaver Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">TaskWeaver</b></a><a class="navbar__item navbar__link" href="/TaskWeaver/docs/overview">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/TaskWeaver/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/taskweaver/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" hidden="" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/TaskWeaver/blog/vision">Vision input for the Planner</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/TaskWeaver/blog/reasoning">What makes a good agent reasoning framework?</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/TaskWeaver/blog/experience">Experience Selection in TaskWeaver</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/TaskWeaver/blog/local_llm">Run TaskWeaver with Locally Deployed Not-that-Large Language Models</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/TaskWeaver/blog/plugin">Plugins In-Depth</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/TaskWeaver/blog/evaluation">How to evaluate a LLM agent?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/TaskWeaver/blog/role">Roles in TaskWeaver</a></li></ul></div></nav></aside><main class="col col--7"><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/TaskWeaver/blog/vision">Vision input for the Planner</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-03-13T00:00:00.000Z">March 13, 2025</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://liqul.github.io/assets/logo_small_bw.png" alt="Liqun Li"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Liqun Li</span></a></div><small class="authorTitle_nd0D" title="Principal Researcher">Principal Researcher</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>We have supported vision input for the Planner role in TaskWeaver.
The Planner role is responsible for generating the high-level plan for the task.
The vision input is a new type of input that contains images.
This feature is useful when the task requires visual understanding.</p></div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="Read more about Vision input for the Planner" href="/TaskWeaver/blog/vision"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/TaskWeaver/blog/reasoning">What makes a good agent reasoning framework?</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-01-20T00:00:00.000Z">January 20, 2025</time> · <!-- -->21 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://liqul.github.io/assets/logo_small_bw.png" alt="Liqun Li"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Liqun Li</span></a></div><small class="authorTitle_nd0D" title="Principal Researcher">Principal Researcher</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p>An agent can listen to the user&#x27;s request, understand the context, make plans, take actions, observe the results, and respond to the user. Its behavior is driven by the reasoning process, which is the core of the agent&#x27;s intelligence.</p></div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="Read more about What makes a good agent reasoning framework?" href="/TaskWeaver/blog/reasoning"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/TaskWeaver/blog/experience">Experience Selection in TaskWeaver</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-09-14T00:00:00.000Z">September 14, 2024</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://liqul.github.io/assets/logo_small_bw.png" alt="Liqun Li"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Liqun Li</span></a></div><small class="authorTitle_nd0D" title="Principal Researcher">Principal Researcher</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p>We have introduced the motivation of the <code>experience</code> module in <a href="/TaskWeaver/docs/customization/experience">Experience</a>
and how to create a handcrafted experience in <a href="/TaskWeaver/docs/customization/experience/handcrafted_experience">Handcrafted Experience</a>.
In this blog post, we discuss more advanced topics about the experience module on experience selection.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="static-experience-selection">Static experience selection<a href="#static-experience-selection" class="hash-link" aria-label="Direct link to Static experience selection" title="Direct link to Static experience selection">​</a></h2>
<p>Every role in TaskWeaver can configure its own experience directory, which can be configured
by setting the <code>role_name.experience_dir</code> field in the project configuration file.
For the <code>Planner</code> and <code>CodeInterpreter</code> roles, you can configure the experience directory
by setting the <code>planner.experience_dir</code> and <code>code_generator.experience_dir</code> fields respectively.
The default experience directory is <code>experience</code> in the project directory.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The role name is by default the name of the implementation file (without the extension) of the role unless
you have specified the role name by calling <code>_set_name</code> in the implementation file.</p></div></div>
<p>By configuring different experience directories for different roles,
you can have different experiences for different roles in a static way.
Use the <code>Planner</code> role as an example, you can have the following project configuration file
to enable the experience selection for the <code>Planner</code> role.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;planner.use_experience&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;planner.experience_dir&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;planner_exp_dir&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="Read more about Experience Selection in TaskWeaver" href="/TaskWeaver/blog/experience"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/TaskWeaver/blog/local_llm">Run TaskWeaver with Locally Deployed Not-that-Large Language Models</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-07-08T00:00:00.000Z">July 8, 2024</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://liqul.github.io/assets/logo_small_bw.png" alt="Liqun Li"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Liqun Li</span></a></div><small class="authorTitle_nd0D" title="Principal Researcher">Principal Researcher</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The feature introduced in this blog post can cause incompatibility issue with the previous version of TaskWeaver
if you have customized the examples for the planner and code interpreter.
The issue is easy to fix by changing the examples to the new schema.
Please refer to the <a href="/TaskWeaver/blog/local_llm#how-we-implemented-the-constrained-generation-in-taskweaver">How we implemented the constrained generation in TaskWeaver</a> section for more details.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a href="#motivation" class="hash-link" aria-label="Direct link to Motivation" title="Direct link to Motivation">​</a></h2>
<p>We&#x27;ve seen many raised issues complaining that it is difficult to run TaskWeaver
with locally deployed non-that-large language models (LLMs), such as 7b or 13b.
When we examine the issues, we find that the main problem is that the models failed
to generate responses following our formatting instructions in the prompt. For instance,
we see that the planner&#x27;s response does not contain a <code>send_to</code> field, which is required
to determine the recipient of the message.</p>
<p>In the past, we have tried to address this issue by adding more examples in the prompt,
which however did not work well, especially for these relatively small models. Another idea
was to ask the model to re-generate the response if it does not follow the format.
We include the format error in the prompt to help the model understand the error and
correct it. However, this approach also did not work well.</p></div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="Read more about Run TaskWeaver with Locally Deployed Not-that-Large Language Models" href="/TaskWeaver/blog/local_llm"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/TaskWeaver/blog/plugin">Plugins In-Depth</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-05-23T00:00:00.000Z">May 23, 2024</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://liqul.github.io/assets/logo_small_bw.png" alt="Liqun Li"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Liqun Li</span></a></div><small class="authorTitle_nd0D" title="Principal Researcher">Principal Researcher</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p><em><strong>Pre-requisites</strong>: Please refer to the <a href="/TaskWeaver/docs/plugin/plugin_intro">Introduction</a> and the <a href="/TaskWeaver/docs/plugin/how_to_develop_a_new_plugin">Plugin Development</a>
pages for a better understanding of the plugin concept and its development process.</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-basics">Plugin Basics<a href="#plugin-basics" class="hash-link" aria-label="Direct link to Plugin Basics" title="Direct link to Plugin Basics">​</a></h2>
<p>In TaskWeaver, the plugins are the essential components to extend the functionality of the agent.
Specifically, a plugin is a piece of code wrapped in a class that can be called as a function by the agent in the generated code snippets.
The following is a simple example of a plugin that generates <code>n</code> random numbers:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> taskweaver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">plugin </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> Plugin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> register_plugin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:rgb(248, 248, 242)">@register_plugin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">RandomGenerator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Plugin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">__call__</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> random</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">random</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">randint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> _ </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">range</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, the <code>RandomGenerator</code> class inherits the <code>Plugin</code> class and implements the <code>__call__</code> method, which means
it can be called as a function. What would be the function signature of the plugin?
It is defined in the associated YAML file. For example, the YAML file for the <code>RandomGenerator</code> plugin is as follows:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> random_generator</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  This plugin generates n random numbers between 1 and 100.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">examples</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  result = random_generator(n=5)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">parameters</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> n</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> int</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      The number of random numbers to generate.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">returns</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> result</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      The list of random numbers.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The YAML file specifies the name, description, parameters, and return values of the plugin.
When the LLM generates the code snippets, it will use the information in the YAML file to generate the function signature.
We did not check the discrepancy between the function signature in the Python implementation and the YAML file.
So, it is important to keep them consistent.
The <code>examples</code> field is used to provide examples of how to use the plugin for the LLM.</p></div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="Read more about Plugins In-Depth" href="/TaskWeaver/blog/plugin"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/TaskWeaver/blog/evaluation">How to evaluate a LLM agent?</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-05-07T00:00:00.000Z">May 7, 2024</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://liqul.github.io/assets/logo_small_bw.png" alt="Liqun Li"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Liqun Li</span></a></div><small class="authorTitle_nd0D" title="Principal Researcher">Principal Researcher</small><div class="authorSocials_rSDt"></div></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://scholar.google.com/citations?user=bqXdMMMAAAAJ&amp;hl=zh-CN" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://scholar.googleusercontent.com/citations?view_op=view_photo&amp;user=bqXdMMMAAAAJ&amp;citpid=3" alt="Xu Zhang"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://scholar.google.com/citations?user=bqXdMMMAAAAJ&amp;hl=zh-CN" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Xu Zhang</span></a></div><small class="authorTitle_nd0D" title="Senior Researcher">Senior Researcher</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-challenges">The challenges<a href="#the-challenges" class="hash-link" aria-label="Direct link to The challenges" title="Direct link to The challenges">​</a></h2>
<p>It is nontrivial to evaluate the performance of a LLM agent.
Existing evaluation methods typically treat the LLM agent as a function that maps input data to output data.
If the agent is evaluated against a multi-step task, the evaluation process is then like a chain of calling a stateful function multiple times.
To judge the output of the agent, it is typically compared to a ground truth or a reference output.
As the output of the agent is in natural language, the evaluation is typically done by matching keywords or phrases in the output to the ground truth.</p>
<p>This evaluation method has its limitations due to its rigid nature.
It is sometimes hard to use keywords matching to evaluate the output of the agent, especially when the output is long and complex.
For example, if the answer is a date or a number, the evaluation method may not be able to handle the different formats.
Moreover, the evaluation method should be able to act more like a human, who can understand the context and the meaning of the output.
For example, when different agents are asked to perform the same task, they may behave differently, but still produce correct outputs.</p></div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="Read more about How to evaluate a LLM agent?" href="/TaskWeaver/blog/evaluation"><b>Read more</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/TaskWeaver/blog/role">Roles in TaskWeaver</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-05-07T00:00:00.000Z">May 7, 2024</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://liqul.github.io/assets/logo_small_bw.png" alt="Liqun Li"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://liqul.github.io" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Liqun Li</span></a></div><small class="authorTitle_nd0D" title="Principal Researcher">Principal Researcher</small><div class="authorSocials_rSDt"></div></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://scholar.google.com/citations?user=bqXdMMMAAAAJ&amp;hl=zh-CN" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://scholar.googleusercontent.com/citations?view_op=view_photo&amp;user=bqXdMMMAAAAJ&amp;citpid=3" alt="Xu Zhang"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://scholar.google.com/citations?user=bqXdMMMAAAAJ&amp;hl=zh-CN" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Xu Zhang</span></a></div><small class="authorTitle_nd0D" title="Senior Researcher">Senior Researcher</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p>We frame TaskWeaver as a <strong>code-first</strong> agent framework. The term &quot;code-first&quot; means that the agent is designed to
convert the user&#x27;s request into one or multiple runnable code snippets and then execute them to generate the response.
The philosophy behind this design is to consider programming languages as the de facto language for communication in cyber-physical systems,
just like the natural language for human communication. Therefore, TaskWeaver translates the user&#x27;s request in natural language into
programming languages, which can be executed by the system to perform the desired tasks.</p>
<p>Under this design, when the developer needs to extend the agent&#x27;s capability, they can write a new plugin.
A plugin is a piece of code wrapped in a class that can be called as a function by the agent in the generated code snippets.
Let&#x27;s consider an example: <em>the agent is asked to load a CSV file and perform anomaly detection on the data</em>.
The workflow of the agent is in the diagram below. It is very natural to represent data to be processed in variables and this task in code snippets.</p>
</div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="Read more about Roles in TaskWeaver" href="/TaskWeaver/blog/role"><b>Read more</b></a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/TaskWeaver/docs/overview">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/Z56MXmZgMb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/microsoft/taskweaver/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 TaskWeaver</div></div></div></footer></div>
</body>
</html>