"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6011],{28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var o=n(96540);const i={},a=o.createContext(i);function s(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(a.Provider,{value:t},e.children)}},47948:e=>{e.exports=JSON.parse('{"permalink":"/TaskWeaver/blog/local_llm","editUrl":"https://github.com/microsoft/TaskWeaver/tree/main/website/blog/local_llm.md","source":"@site/blog/local_llm.md","title":"Run TaskWeaver with Locally Deployed Not-that-Large Language Models","description":"The feature introduced in this blog post can cause incompatibility issue with the previous version of TaskWeaver","date":"2024-07-08T00:00:00.000Z","tags":[],"readingTime":5.66,"hasTruncateMarker":true,"authors":[{"name":"Liqun Li","url":"https://liqul.github.io","title":"Principal Researcher","imageURL":"https://liqul.github.io/assets/logo_small_bw.png","key":"liqli","page":null}],"frontMatter":{"title":"Run TaskWeaver with Locally Deployed Not-that-Large Language Models","authors":"liqli","date":"2024-07-08T00:00:00.000Z"},"unlisted":false,"prevItem":{"title":"Experience Selection in TaskWeaver","permalink":"/TaskWeaver/blog/experience"},"nextItem":{"title":"Plugins In-Depth","permalink":"/TaskWeaver/blog/plugin"}}')},59291:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>h});var o=n(47948),i=n(74848),a=n(28453);const s={title:"Run TaskWeaver with Locally Deployed Not-that-Large Language Models",authors:"liqli",date:new Date("2024-07-08T00:00:00.000Z")},r=void 0,l={authorsImageUrls:[void 0]},h=[{value:"Motivation",id:"motivation",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsxs)(t.p,{children:["The feature introduced in this blog post can cause incompatibility issue with the previous version of TaskWeaver\nif you have customized the examples for the planner and code interpreter.\nThe issue is easy to fix by changing the examples to the new schema.\nPlease refer to the ",(0,i.jsx)(t.a,{href:"/blog/local_llm#how-we-implemented-the-constrained-generation-in-taskweaver",children:"How we implemented the constrained generation in TaskWeaver"})," section for more details."]})}),"\n",(0,i.jsx)(t.h2,{id:"motivation",children:"Motivation"}),"\n",(0,i.jsxs)(t.p,{children:["We've seen many raised issues complaining that it is difficult to run TaskWeaver\nwith locally deployed non-that-large language models (LLMs), such as 7b or 13b.\nWhen we examine the issues, we find that the main problem is that the models failed\nto generate responses following our formatting instructions in the prompt. For instance,\nwe see that the planner's response does not contain a ",(0,i.jsx)(t.code,{children:"send_to"})," field, which is required\nto determine the recipient of the message."]}),"\n",(0,i.jsx)(t.p,{children:"In the past, we have tried to address this issue by adding more examples in the prompt,\nwhich however did not work well, especially for these relatively small models. Another idea\nwas to ask the model to re-generate the response if it does not follow the format.\nWe include the format error in the prompt to help the model understand the error and\ncorrect it. However, this approach also did not work well."})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);