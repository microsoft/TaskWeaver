"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[303],{28453:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>i});var r=o(96540);const a={},s=r.createContext(a);function t(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(s.Provider,{value:n},e.children)}},32660:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"usage/docker","title":"All-in-One Docker Image","description":"In this document, we will show you how to run TaskWeaver using the All-in-One Docker Image.","source":"@site/docs/usage/docker.md","sourceDirName":"usage","slug":"/usage/docker","permalink":"/TaskWeaver/docs/usage/docker","draft":false,"unlisted":false,"editUrl":"https://github.com/microsoft/TaskWeaver/tree/main/website/docs/usage/docker.md","tags":[],"version":"current","frontMatter":{},"sidebar":"documentSidebar","previous":{"title":"Library","permalink":"/TaskWeaver/docs/usage/library"},"next":{"title":"Supported LLMs","permalink":"/TaskWeaver/docs/llms"}}');var a=o(74848),s=o(28453);const t={},i="All-in-One Docker Image",c={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Run TaskWeaver using the All-in-One Docker Image",id:"run-taskweaver-using-the-all-in-one-docker-image",level:2},{value:"How to run TaskWeaver on your own project directory",id:"how-to-run-taskweaver-on-your-own-project-directory",level:2},{value:"How to access your local files in the container",id:"how-to-access-your-local-files-in-the-container",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"all-in-one-docker-image",children:"All-in-One Docker Image"})}),"\n",(0,a.jsx)(n.p,{children:"In this document, we will show you how to run TaskWeaver using the All-in-One Docker Image."}),"\n",(0,a.jsx)(n.admonition,{type:"danger",children:(0,a.jsxs)(n.p,{children:["Please note that the All-in-One Docker Image is for development and testing purposes only. It is running in\nthe ",(0,a.jsx)(n.a,{href:"/TaskWeaver/docs/code_execution",children:"local"})," mode, which means that the execution of the code snippets is done in the same container.\nMalicious code can be executed in the container, so please be cautious when running the All-in-One Docker Image."]})}),"\n",(0,a.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsx)(n.p,{children:"You need to have Docker installed on your machine."}),"\n",(0,a.jsxs)(n.p,{children:["For Windows and macOS users, you can use Docker Desktop. You can download it from ",(0,a.jsx)(n.a,{href:"https://www.docker.com/products/docker-desktop",children:"Docker's official website"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["For Linux users, you can install following the instructions in the ",(0,a.jsx)(n.a,{href:"https://docs.docker.com/engine/install/",children:"Docker's official website"}),".\nPlease find the installation guide for your specific Linux distribution."]}),"\n",(0,a.jsx)(n.h2,{id:"run-taskweaver-using-the-all-in-one-docker-image",children:"Run TaskWeaver using the All-in-One Docker Image"}),"\n",(0,a.jsx)(n.p,{children:"There are two versions of the TaskWeaver All-in-One Docker Image:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"taskweavercontainers/taskweaver-all-in-one:latest"}),": This version includes the Planner and CodeInterpreter roles only.\nYou can use this container for code generation and execution tasks."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"taskweavercontainers/taskweaver-all-in-one:latest-ws"}),": This version includes an additional WebSearch role which can search the web for information.\nAs it requires dependencies to the ",(0,a.jsx)(n.code,{children:"sentence-transformers"})," library, it is larger."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Open a terminal and run the following command to obtain the TaskWeaver image:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker pull taskweavercontainers/taskweaver-all-in-one:latest\n# if you want to use the version with the WebSearch role \n# docker pull taskweavercontainers/taskweaver-all-in-one:latest-ws\n"})}),"\n",(0,a.jsx)(n.p,{children:"Once the image is pulled, you can run the TaskWeaver container using the following command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker run -it -e LLM_API_BASE=<API_BASE> \\\n  -e LLM_API_KEY=<API_KEY> \\\n  -e LLM_API_TYPE=<API_TYPE> \\\n  -e LLM_MODEL=<MODEL> \\\n  taskweavercontainers/taskweaver-all-in-one:latest\n"})}),"\n",(0,a.jsx)(n.p,{children:"If you want to run TaskWeaver in UI mode, you can use the following command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker run -it -e LLM_API_BASE=<API_BASE> \\\n  -e LLM_API_KEY=<API_KEY> \\\n  -e LLM_API_TYPE=<API_TYPE> \\\n  -e LLM_MODEL=<MODEL> \\\n  -p 8000:8000 \\\n  --entrypoint /app/entrypoint_chainlit.sh \\\n  taskweavercontainers/taskweaver-all-in-one:latest \n"})}),"\n",(0,a.jsxs)(n.p,{children:["Then you can access the TaskWeaver Web UI by visiting ",(0,a.jsx)(n.a,{href:"http://localhost:8000",children:"http://localhost:8000"})," in your web browser."]}),"\n",(0,a.jsx)(n.h2,{id:"how-to-run-taskweaver-on-your-own-project-directory",children:"How to run TaskWeaver on your own project directory"}),"\n",(0,a.jsxs)(n.p,{children:["You can mount your local ",(0,a.jsx)(n.code,{children:"project"})," directory to the container. For example, you can use the following command:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker run -it -e LLM_API_BASE=<API_BASE> \\\n  -e LLM_API_KEY=<API_KEY> \\\n  -e LLM_API_TYPE=<API_TYPE> \\\n  -e LLM_MODEL=<MODEL> \\\n#  -e TASKWEAVER_UID=$(id -u) \\ # uncomment if your host OS is not Windows\n#  -e TASKWEAVER_GID=$(id -g) \\ # uncomment if your host OS is not Windows\n  --mount type=bind,source=<your_local_project_dir>,target=/app/TaskWeaver/project/ \\\n  taskweavercontainers/taskweaver-all-in-one:latest\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Then you can edit the ",(0,a.jsx)(n.code,{children:"taskweaver_config.json"})," file in your local ",(0,a.jsx)(n.code,{children:"project"})," directory to configure TaskWeaver.\nIn addition, you also can customize the plugins and examples in your local ",(0,a.jsx)(n.code,{children:"project"})," directory.\nThe structure of the ",(0,a.jsx)(n.code,{children:"project"})," directory can be referred to the ",(0,a.jsx)(n.code,{children:"taskweaver/project"})," directory."]}),"\n",(0,a.jsx)(n.h2,{id:"how-to-access-your-local-files-in-the-container",children:"How to access your local files in the container"}),"\n",(0,a.jsx)(n.p,{children:"You can mount your local directory to the container. For example, you can use the following command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker run -it -e LLM_API_BASE=<API_BASE> \\\n  -e LLM_API_KEY=<API_KEY> \\\n  -e LLM_API_TYPE=<API_TYPE> \\\n  -e LLM_MODEL=<MODEL> \\\n#  -e TASKWEAVER_UID=$(id -u) \\ # uncomment if your host OS is not Windows\n#  -e TASKWEAVER_GID=$(id -g) \\ # uncomment if your host OS is not Windows\n  --mount type=bind,source=<your_local_dir>,target=/app/TaskWeaver/local/ \\\n  taskweavercontainers/taskweaver-all-in-one:latest\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Then you can access your local files in the container by visiting the ",(0,a.jsx)(n.code,{children:"/app/TaskWeaver/local/"})," directory.\nYou can load a file under the ",(0,a.jsx)(n.code,{children:"/app/TaskWeaver/local/"})," directory in the TaskWeaver CLI\nwith the ",(0,a.jsx)(n.code,{children:"/load"})," command. For example, you can load a file named ",(0,a.jsx)(n.code,{children:"example.csv"})," by running the following command:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:" TaskWeaver \u25b6  I am TaskWeaver, an AI assistant. To get started, could you please enter your request?\n    Human   \u25b6  /load /app/TaskWeaver/local/example.csv\n    Human   \u25b6  display the column names of the loaded file\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);